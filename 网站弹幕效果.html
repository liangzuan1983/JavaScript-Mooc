<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>jquery弹幕-jq22.com</title>
<style>
	* {
		margin:0;
		padding:0;
		border:0;
	}
	.barrage {
		width:100%;
		height:230px;
		margin:0 auto;
		position:relative;
	}
	.barrage .show {
		width:100%;
		height:100%;
		background:#000;
		opacity:0.5;
		position:absolute;
		top:0;
		left:0;
	}
	.barrage .show div {
		color:#fff;
		position:absolute;
		right:0;
	}
	.barrage-txt {
		width:70%;
		background-color:#ccc;
	}
	.barrage-send {
		width:25%;
		cursor:pointer;
	}
</style>
</head>
<body>
<center>
  <a href="" id="barrage_on_off">弹幕区域</a>
</center>
<!--barrage start-->
<div class="barrage">
  <div class="show"> 
    <!-- 弹幕内容 --> 
  </div>
</div>
<!--end barrage-->
<div class="barrage" style="height:auto;">
  <input type="text" class="barrage-txt" value="在这输入弹幕内容" placeholder="请输入弹幕内容"/>
  <input type="button" value="发布评论" class="barrage-send"/>
</div>
<script src="http://libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>
<script>
	$(function(){
			$("#barrage_on_off").click(function(){
				$(".barrage").toggle();
				return false;
			});
			$(".barrage-send").click(function(){
			   var text=$(".barrage-txt").val();
			   var div="<div>"+text+"</div>";
			   var width = $(".barrage").width();
			   var height = Math.floor(Math.random()*$(".barrage").height());
			   $(".show").append(div);
			   var length = $('.show div').length;
			   $('.show div').eq(length-1).css({'top':height,'width':$('.show div').eq(length-1).width()});
			   $('.show div').eq(length-1).animate({right:width},6000);
			})
		});
	</script>
</body>
</html>
